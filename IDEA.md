# Description of a Decentralized Data Storage System Using SQLite

The system consists of a central database and distributed bucket
databases, with data organization based on a hierarchical directory
structure.

## Central Database (Indexing Database)

- Contains a `buckets` table, which records individual bucket databases.
- Includes a `bucket_meta` table that stores metadata about records
stored in buckets.  Each row contains a reference identifier (`key`)
that links a record in a bucket to its metadata.

## Bucket Databases

- These are standalone SQLite files containing a `bucket` table with
key-value formatted data.
- Each bucket is named using a unique identifier key generated via a
cryptographically secure algorithm.

## Hierarchical Organization of Buckets in the Filesystem

- Bucket databases are stored in the `bucketroot/` directory and divided
into subdirectories based on parts of their identifier.
- The directory structure is generated by extracting the first
characters of the bucket's hexadecimal identifier, ensuring an even
distribution of files across directories.

## Data Linking Principle

1.  When writing a new record, a reference identifier (`key`) is first
generated.
2.  This key is stored in the `bucket_meta` table in the central
database and is also used as the key for the record in the respective
bucket.
3.  During read or update operations, the key is first looked up in the
central database to identify the specific bucket where the value is
stored.

This system enables the organization and management of large amounts of
data through a decentralized structure while keeping indexing and
metadata centralized in the main database.
